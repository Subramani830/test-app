[
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "modified": "2021-05-12 12:23:48.437870",
  "name": "item_codification",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Item",
  "script": "if doc.variant_of and doc.is_sales_item == 1:\n    if doc.updated_item == 0:\n        for attribute_list in doc.attributes:\n            abbr=frappe.db.get_value(\"Item Attribute Value\",{\"parent\":attribute_list.attribute,\"attribute_value\":attribute_list.attribute_value,\"parenttype\":\"Item Attribute\"},\"abbr\")\n            if(attribute_list.attribute == \"Colour\"):\n                color_abbr=abbr\n            elif(attribute_list.attribute == \"Size\"):\n                size_abbr=abbr\n        res = str(doc.variant_of)+str(color_abbr)+\"-\"+str(size_abbr)\n        doc.item_code=res\n        doc.updated_item = 1",
  "script_type": "DocType Event"
 }
]
[
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2021-05-12 12:24:35.025539",
  "name": "Item-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item', {\n    refresh: function(frm){\n        if(frm.doc.variant_of != undefined){\n            frappe.db.get_value(\"Item\",{\"name\":frm.doc.variant_of},[\"brand_code\",\"launch_year\",\"collection_code\",\"style_number\"],(i)=>{\n               if(frm.doc.brand_code == undefined){ frm.set_value(\"brand_code\",i.brand_code); }\n               if(frm.doc.launch_year == undefined){ frm.set_value(\"launch_year\",i.launch_year);}\n               if(frm.doc.collection_code == undefined){ frm.set_value(\"collection_code\",i.collection_code);}\n                if(frm.doc.style_number == undefined){frm.set_value(\"style_number\",i.style_number);}\n            });\n        }\n    },\n\tbefore_save: function(frm){\n\t    if(frm.doc.variant_of == undefined && frm.doc.is_sales_item == 1){\n\t        var brand = frm.doc.brand_code;\n\t        var year = frm.doc.launch_year;\n\t        var collection = frm.doc.collection_code;\n\t        var sub_category;\n\t        var category;\n\t        var style = frm.doc.style_number;\n\t        var res;\n\t        frappe.db.get_value(\"Item Group\",{\"name\":frm.doc.item_group},[\"sub_category_code\",\"parent_item_group\"],(s)=>{\n\t          sub_category=s.sub_category_code;\n\t          frappe.db.get_value(\"Item Group\",{\"name\":s.parent_item_group},\"category_code\",(c)=>{\n\t              category=c.category_code\n\t              if(category == undefined){\n\t             res = brand.concat(year,collection,sub_category,style)\n\t              }else{\n\t             res = brand.concat(year,collection,category,sub_category,style)\n\t              }\n\t              frm.set_value(\"item_code\",res);\n\t              frm.refresh_field(\"item_code\");\n\t          })\n\t        });\n\t    }\n\t}\n})\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "POS Invoice",
  "enabled": 1,
  "modified": "2021-05-10 17:21:08.223331",
  "name": "POS Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('POS Invoice', {\n    validate(frm){\n        if(frm.doc.transaction_id!=null && frm.doc.transaction_id!=undefined){\n\t        for(var i=0;i<frm.doc.payments.length;i++){\n\t            if(frm.doc.payments[i].mode_of_payment==\"Online\" && frm.doc.payments[i].mode_of_payment!=undefined && frm.doc.payments[i].base_amount>0){\n\t                frm.doc.payments[i].transaction_id=frm.doc.transaction_id\n\t            }\n\t        }\n\t    }\n\t\tif (frm.doc.payments!=null) {\n\t\t\tfor(var j=0;j<frm.doc.payments.length;j++){\n\t            if(frm.doc.payments[j].mode_of_payment==\"Online\" && frm.doc.payments[j].mode_of_payment!=undefined && frm.doc.payments[j].base_amount>0){\n\t                if(frm.doc.payments[j].transaction_id==null||frm.doc.payments[j].transaction_id==undefined||frm.doc.payments[j].transaction_id==''){\n\t                    frappe.msgprint(__(\"Mode of Payment is Online.So please update the Transaction ID\"));\n\t\t\t            frappe.validated = false;\n\t                }\n\t            }\n\t        }\n\t\t}\n\t}\n})"
 }
]